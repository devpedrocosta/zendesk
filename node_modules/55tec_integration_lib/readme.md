# 55tec_integration_lib

###  listen(channel: Channel, handler: Handler): void
Bootstraps all communication between integrator API and module's handle function.


 - _channel_: responsible to send payloads between integrator API and the module.
 
 - _handler_: function used to process all requests of "integration" protocol.


```

import path from 'path';

import { listen } from '55tec_integration_lib';
import { Action, newAction } from '55tec_integration_lib/model/metadata/action';
import { Entity } from '55tec_integration_lib/model/metadata/action/entity';
import { Operation } from '55tec_integration_lib/model/metadata/action/operation';
import { Context } from '55tec_integration_lib/service';
import { Channel } from '55tec_integration_lib/model/protocol';
import { Request } from '55tec_integration_lib/model/protocol/integrator/request';
import { Body as ResponseBody } from '55tec_integration_lib/model/protocol/integrator/response';
import { Client as Browser } from '55tec_integration_lib/model/protocol/browser';
import { Client as Server, Router } from '55tec_integration_lib/model/protocol/server';
import { Client as IntegrationClient, Alias } from '55tec_integration_lib/model/protocol/integration';

import service from './service';

let channel: Channel = process as Channel;

let browser = new Browser(channel, path.join(__dirname, 'browser/func'));
service.setBrowser(browser);

listen(channel, async (req: Request) => {

    let ctx = new Context(req);

    let result: ResponseBody = await service.process(ctx);

    return result;

});

let client = new IntegrationClient(channel);

let router = new Router();

// get | post | put | patch | delete
router.get('/test', async (req, res) => {

    let {
        urn, // URN -> '/test'
        method, // METHOD -> 'get'
        headers,
        body,
        params,
        query
    } = req;

    await client.send(Alias.MESSAGING_BRIDGE, newAction(Entity.MESSAGE, Operation.CREATE), {
        data: {
            content: 'Hello'
        }
    });

    return res.status(201).json({ success: true });

});

let server = new Server(channel);
server.use(router);

```
