"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.label = exports.getMetadata = exports.prop = exports.PROPERTY_METADATA_KEY = void 0;
require("reflect-metadata");
exports.PROPERTY_METADATA_KEY = Symbol('propertyMetadata');
function prop(obj) {
    return (target, prop) => {
        let metadata = Reflect.getMetadata(exports.PROPERTY_METADATA_KEY, target) || {};
        metadata[prop] = metadata[prop] || {};
        for (let key of Reflect.ownKeys(obj))
            metadata[prop][key] = obj[key];
        Reflect.defineMetadata(exports.PROPERTY_METADATA_KEY, metadata, target);
    };
}
exports.prop = prop;
function getMetadata(instance) {
    let metafields = Reflect.getMetadata(exports.PROPERTY_METADATA_KEY, instance) || {};
    return {
        label: instance.label,
        fields: Object.keys(metafields).map(k => metafields[k])
    };
}
exports.getMetadata = getMetadata;
function label(lang, text) {
    return function (constructor) {
        constructor.prototype.label = {
            ...(constructor.prototype.label || {}),
            [lang]: text
        };
    };
}
exports.label = label;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVjb3JhdG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGVjb3JhdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDRCQUEwQjtBQUdiLFFBQUEscUJBQXFCLEdBQUcsTUFBTSxDQUFDLGtCQUFrQixDQUFDLENBQUM7QUFFaEUsU0FBZ0IsSUFBSSxDQUFDLEdBQWM7SUFDL0IsT0FBTyxDQUFDLE1BQVcsRUFBRSxJQUE4QixFQUFFLEVBQUU7UUFFbkQsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyw2QkFBcUIsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFeEUsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFdEMsS0FBSyxJQUFJLEdBQUcsSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztZQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBc0IsQ0FBQyxDQUFDO1FBRXhGLE9BQU8sQ0FBQyxjQUFjLENBQ2xCLDZCQUFxQixFQUNyQixRQUFRLEVBQ1IsTUFBTSxDQUNULENBQUM7SUFDTixDQUFDLENBQUE7QUFDTCxDQUFDO0FBZkQsb0JBZUM7QUFFRCxTQUFnQixXQUFXLENBQUMsUUFBYTtJQUVyQyxJQUFJLFVBQVUsR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLDZCQUFxQixFQUFFLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUU1RSxPQUFPO1FBQ0gsS0FBSyxFQUFFLFFBQVEsQ0FBQyxLQUFLO1FBQ3JCLE1BQU0sRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUMxRCxDQUFDO0FBRU4sQ0FBQztBQVRELGtDQVNDO0FBRUQsU0FBZ0IsS0FBSyxDQUFDLElBQVksRUFBRSxJQUFZO0lBQzVDLE9BQU8sVUFBVSxXQUFxQjtRQUNsQyxXQUFXLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRztZQUMxQixHQUFHLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDO1lBQ3RDLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSTtTQUNmLENBQUM7SUFDTixDQUFDLENBQUE7QUFDTCxDQUFDO0FBUEQsc0JBT0MifQ==