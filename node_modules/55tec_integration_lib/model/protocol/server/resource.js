"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Router = exports.SchedulingStrategy = exports.ResponseImpl = exports.RequestImpl = exports.Method = exports.HTTPError = void 0;
const promise_1 = require("../../../util/promise");
const fs_1 = __importDefault(require("fs"));
class HTTPError extends Error {
    constructor(message, code = '500', name = 'error') {
        super(message);
        this.code = code;
        this.name = name;
    }
    toJSON() {
        return {
            message: this.message,
            code: this.code,
            name: this.name,
        };
    }
    toString() {
        return `${this.code} - ${this.name} - ${this.message}`;
    }
}
exports.HTTPError = HTTPError;
var Method;
(function (Method) {
    Method["GET"] = "get";
    Method["POST"] = "post";
    Method["PUT"] = "put";
    Method["PATCH"] = "patch";
    Method["DELETE"] = "delete";
})(Method = exports.Method || (exports.Method = {}));
class RequestImpl {
    constructor(context) {
        this.urn = context.urn;
        this.method = context.method;
        this.query = context.query;
        this.body = context.body;
        this.params = context.params;
        this.headers = context.headers;
        this.connection = context.connection;
    }
    header(header) {
        return this.headers[header.toLowerCase()];
    }
    ;
}
exports.RequestImpl = RequestImpl;
class ResponseImpl extends promise_1.IdentifiablePromise {
    constructor() {
        super(...arguments);
        this.code = '200';
    }
    status(value) {
        this.code = '' + value;
        return this;
    }
    json(data, status) {
        if (status)
            this.status(status);
        this.body = data;
        if ('2' !== this.code[0]) {
            let message = data;
            if (typeof message === 'object')
                message = data.message || data.error || data.reason || data.response || data.payload || JSON.stringify(data);
            return this.reject(new HTTPError(message, this.code, data.name));
        }
        this.resolve({
            code: this.code,
            body: this.body,
            headers: this.headers,
        });
    }
    end() {
        if ('2' !== this.code[0])
            return this.reject(new HTTPError('', this.code, this.name));
        this.resolve({
            code: this.code,
            headers: this.headers,
        });
    }
    header(header, value) {
        if (!this.headers)
            this.headers = {};
        this.headers[header.toLowerCase()] = value;
        return this;
    }
    sendFile(path) {
        fs_1.default.readFile(path, 'utf-8', (err, data) => {
            if (err)
                return this.reject(new HTTPError(err.message, '500'));
            if ('2' !== this.code[0])
                return this.reject(new HTTPError(data, this.code, this.name));
            this.resolve({
                code: this.code,
                headers: {
                    ...(this.headers || {}),
                },
                body: data
            });
        });
    }
    text(content) {
        return this.send(content);
    }
    send(data) {
        if ('2' !== this.code[0])
            return this.reject(new HTTPError(data, this.code, this.name));
        this.resolve({
            code: this.code,
            headers: { ...(this.headers || {}) },
            body: data,
        });
    }
}
exports.ResponseImpl = ResponseImpl;
var StatusScheduling;
(function (StatusScheduling) {
    StatusScheduling["FIRST"] = "first";
    StatusScheduling["MIDDLE"] = "middle";
    StatusScheduling["LAST"] = "last";
})(StatusScheduling || (StatusScheduling = {}));
function* SchedulingStrategy(handlers) {
    let i = 0;
    let status = StatusScheduling.FIRST;
    while (i < handlers.length) {
        const handler = handlers[i++];
        yield { handler, status };
        status = (i === handlers.length) ? StatusScheduling.LAST : StatusScheduling.MIDDLE;
    }
}
exports.SchedulingStrategy = SchedulingStrategy;
const routerMiddleware = (target, propertyName, descriptor) => {
    const method = descriptor.value;
    descriptor.value = function () {
        const [urn, ...handlers] = Object.values(arguments);
        const newArgument = async (req, res) => {
            const scheduling = SchedulingStrategy(handlers);
            // initializing
            let nextIterator = scheduling.next();
            while (!nextIterator.done) {
                const { value: { status, handler } } = nextIterator;
                if (status === StatusScheduling.LAST)
                    return handler(req, res);
                let useNext = false;
                await handler(req, res, () => {
                    nextIterator = scheduling.next();
                    useNext = true;
                });
                if (!useNext)
                    return;
            }
        };
        return method.call(this, urn, newArgument);
    };
};
class Router {
    constructor() {
        this.resources = {
            [Method.GET]: {},
            [Method.POST]: {},
            [Method.PUT]: {},
            [Method.PATCH]: {},
            [Method.DELETE]: {},
        };
    }
    get(urn, ...handlers) {
        const [handler] = handlers;
        return this.register(Method.GET, urn, handler);
    }
    post(urn, ...handlers) {
        const [handler] = handlers;
        return this.register(Method.POST, urn, handler);
    }
    put(urn, ...handlers) {
        const [handler] = handlers;
        return this.register(Method.PUT, urn, handler);
    }
    patch(urn, ...handlers) {
        const [handler] = handlers;
        return this.register(Method.PATCH, urn, handler);
    }
    delete(urn, ...handlers) {
        const [handler] = handlers;
        return this.register(Method.DELETE, urn, handler);
    }
    register(method, urn, handler) {
        this.resources[method][urn] = handler;
        return this;
    }
    getHandler(method, urn) {
        return this.resources[method][urn];
    }
}
__decorate([
    routerMiddleware,
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Function]),
    __metadata("design:returntype", void 0)
], Router.prototype, "get", null);
__decorate([
    routerMiddleware,
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Function]),
    __metadata("design:returntype", void 0)
], Router.prototype, "post", null);
__decorate([
    routerMiddleware,
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Function]),
    __metadata("design:returntype", void 0)
], Router.prototype, "put", null);
__decorate([
    routerMiddleware,
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Function]),
    __metadata("design:returntype", void 0)
], Router.prototype, "patch", null);
__decorate([
    routerMiddleware,
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Function]),
    __metadata("design:returntype", void 0)
], Router.prototype, "delete", null);
exports.Router = Router;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzb3VyY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyZXNvdXJjZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQSxtREFBNEQ7QUFDNUQsNENBQW1CO0FBRW5CLE1BQWEsU0FBVSxTQUFRLEtBQUs7SUFLaEMsWUFBWSxPQUFlLEVBQUUsT0FBZSxLQUFLLEVBQUUsT0FBZSxPQUFPO1FBQ3JFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNmLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0lBQ3JCLENBQUM7SUFFRCxNQUFNO1FBQ0YsT0FBTztZQUNILE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTztZQUNyQixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7WUFDZixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7U0FDbEIsQ0FBQztJQUNOLENBQUM7SUFFRCxRQUFRO1FBQ0osT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLE1BQU0sSUFBSSxDQUFDLElBQUksTUFBTSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDM0QsQ0FBQztDQUVKO0FBdkJELDhCQXVCQztBQU1ELElBQVksTUFRWDtBQVJELFdBQVksTUFBTTtJQUVkLHFCQUFXLENBQUE7SUFDWCx1QkFBYSxDQUFBO0lBQ2IscUJBQVcsQ0FBQTtJQUNYLHlCQUFlLENBQUE7SUFDZiwyQkFBaUIsQ0FBQTtBQUVyQixDQUFDLEVBUlcsTUFBTSxHQUFOLGNBQU0sS0FBTixjQUFNLFFBUWpCO0FBb0NELE1BQWEsV0FBVztJQVdwQixZQUFZLE9BQXNCO1FBQzlCLElBQUksQ0FBQyxHQUFHLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQztRQUN2QixJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7UUFDN0IsSUFBSSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxD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